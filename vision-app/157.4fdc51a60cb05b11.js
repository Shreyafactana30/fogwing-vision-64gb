"use strict";(self.webpackChunkvision_sensing=self.webpackChunkvision_sensing||[]).push([[157],{157:(M,u,e)=>{e.r(u),e.d(u,{CloudConnectModule:()=>J});var a=e(6895),p=e(2510),r=e(4006),t=e(4650),m=e(3662),f=e(3730),C=e(529);let g=(()=>{class o{constructor(n){this.http=n}getCloudConnectData(){return this.http.get(`${f.pD}/`)}postCloudConnectData(n){return this.http.post(`${f.pD}/`,n)}}return o.\u0275fac=function(n){return new(n||o)(t.LFG(C.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var h=e(2471),v=e(2095),b=e(740),y=e(7392),x=e(4859),s=e(9549),_=e(4144);function w(o,l){if(1&o){const n=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"form",4)(3,"div",5)(4,"div",6),t._UZ(5,"app-single-input",7)(6,"br")(7,"app-single-input",8)(8,"br"),t.TgZ(9,"mat-form-field",9)(10,"mat-label",10),t._uU(11,"Password"),t.qZA(),t._UZ(12,"input",11)(13,"br"),t.TgZ(14,"button",12),t.NdJ("click",function(c){t.CHM(n);const d=t.oxw();return d.hide=!d.hide,t.KtG(c.stopImmediatePropagation())}),t.TgZ(15,"mat-icon"),t._uU(16),t.qZA()(),t.TgZ(17,"mat-error"),t._uU(18,"Password is Required"),t.qZA()()(),t.TgZ(19,"div",6),t._UZ(20,"app-single-input",13)(21,"br")(22,"app-single-input",14),t.qZA()(),t.TgZ(23,"div",5)(24,"div",15)(25,"div",16)(26,"span",17),t._uU(27,"Note: "),t.qZA(),t._uU(28," If cloud connect updated, Restart the device to apply the changes. "),t.qZA(),t.TgZ(29,"button",18),t.NdJ("click",function(){t.CHM(n);const c=t.oxw();return t.KtG(c.postCloudData())}),t._uU(30),t.qZA()()()()()()}if(2&o){const n=t.oxw();t.xp6(2),t.Q6J("formGroup",n.cloudConnectionForm),t.xp6(3),t.Q6J("control",n.cloudConnectionForm.get("fwv_mqtt_client_id"))("required",!0),t.xp6(2),t.Q6J("control",n.cloudConnectionForm.get("fwv_mqtt_username"))("required",!0),t.xp6(5),t.Q6J("type",n.hide?"password":"text"),t.xp6(2),t.uIk("aria-label","Hide password")("aria-pressed",n.hide),t.xp6(2),t.Oqu(n.hide?"visibility_off":"visibility"),t.xp6(4),t.Q6J("control",n.cloudConnectionForm.get("fwv_apikey"))("required",!1),t.xp6(2),t.Q6J("control",n.cloudConnectionForm.get("fwv_fogwing_apikey"))("required",!1),t.xp6(7),t.Q6J("disabled",n.cloudConnectionForm.invalid||n.disable_submit),t.xp6(1),t.hij(" ",n.disable_submit?"Loading..":"Submit"," ")}}function I(o,l){1&o&&(t.TgZ(0,"div",2),t._UZ(1,"app-internal-error"),t.qZA())}const T=[{path:"",component:(()=>{class o{constructor(n,i,c,d){this.formBuilder=n,this.snackbar=i,this.cloudConnectService=c,this.wifiSettingsService=d,this.internal_error=!1,this.hide=!0,this.fwv_cloud_conn_id=null,this.disable_submit=!1,this.cloudConnectionForm=this.formBuilder.group({fwv_mqtt_client_id:["",r.kI.required],fwv_apikey:[""],fwv_mqtt_username:["",r.kI.required],fwv_mqtt_password:["",r.kI.required],fwv_fogwing_apikey:[""]})}ngOnInit(){this.getCloudData()}postCloudData(){const n={...this.cloudConnectionForm.value,fwv_cloud_conn_id:this.fwv_cloud_conn_id};this.disable_submit=!0,this.cloudConnectService.postCloudConnectData(n).subscribe({next:i=>{this.disable_submit=!1,this.snackbar.top_snackbar(i.Successful,"successful"),this.getCloudData()},error:i=>{this.disable_submit=!1,i.error.Unsuccessful?this.snackbar.top_snackbar(i.error.Unsuccessful,"unsuccessful"):0==this.wifiSettingsService.isOnline()?this.snackbar.top_snackbar("Device is Offline.","unsuccessful"):this.snackbar.top_snackbar("Something Went Wrong.","unsuccessful")}})}getCloudData(){this.cloudConnectService.getCloudConnectData().subscribe({next:n=>{let i=n;0==i.cloud_conn.length?this.fwv_cloud_conn_id=null:(this.cloudConnectionForm.patchValue(i.cloud_conn[0]),this.fwv_cloud_conn_id=i.cloud_conn[0].fwv_cloud_conn_id)},error:n=>{this.fwv_cloud_conn_id=null,this.internal_error=!0}})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(r.qu),t.Y36(m.h),t.Y36(g),t.Y36(h.A))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-cloud-connect"]],decls:3,vars:2,consts:[[1,"main-window"],["class","cloud-connection-body",4,"ngIf"],[1,"cloud-connection-body"],[1,"card","card-style"],[3,"formGroup"],[1,"row"],[1,"col-lg-6","col-md-6","col-sm-12","col-xs-12","text-center"],["type","text","label","MQTT Client ID","placeholder","Enter MQTT Client ID","error","MQTT Client ID is Required",3,"control","required"],["type","text","label","Username","placeholder","Enter Username","error","Username is Required",3,"control","required"],["appearance","outline",1,"one1-point","font-light-bold",2,"width","25vw"],[1,"one1-point","font-light-bold"],["matInput","","required","","formControlName","fwv_mqtt_password","placeholder","Enter Password","required","",1,"one1-point","font-light-bold",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["type","text","label","Vision API Key","placeholder","Enter Vision API Key","error","Vision API Key is Required",3,"control","required"],["type","text","label","Fogwing IIOT API Key","placeholder","Enter Fogwing IIOT API Key","error","Fogwing IIOT API Key is Required",3,"control","required"],[1,"col"],[1,"fst-italic","float-start",2,"margin-top","3vh"],[1,"text-info",2,"font-weight","550"],["type","submit",1,"btn","btn-cloud-connect","btn-secondary","text-light","float-end","mt-2",3,"disabled","click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.YNc(1,w,31,15,"div",1),t.YNc(2,I,2,0,"div",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",!i.internal_error),t.xp6(1),t.Q6J("ngIf",i.internal_error))},dependencies:[a.O5,v.g,b.b,y.Hw,x.lW,s.TO,s.KE,s.hX,s.R9,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,_.Nt],styles:[".cloud-connection-body[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:87vh}.btn-cloud-connect[_ngcontent-%COMP%]{padding:20px 30px;font-size:20px;border-radius:15px;background-color:#000}.card-style[_ngcontent-%COMP%]{padding:3%;background-color:#f6f6f6;border-radius:15px}.font-light-bold[_ngcontent-%COMP%]{font-weight:550}"]}),o})()}];let Z=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.Bz.forChild(T),p.Bz]}),o})();var F=e(7156),A=e(896),q=e(7965);let J=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[a.ez,Z,F.X,A.j,q.IN]}),o})()}}]);