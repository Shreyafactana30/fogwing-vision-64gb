"use strict";(self.webpackChunkvision_sensing=self.webpackChunkvision_sensing||[]).push([[267],{7267:(q,c,i)=>{i.r(c),i.d(c,{EdgeSettingModule:()=>k});var g=i(6895),v=i(896),l=i(2510),o=i(4006),e=i(4650),u=i(3730),f=i(529);let h=(()=>{class n{constructor(t){this.http=t}getEdgeSettingData(){return this.http.get(`${u.nM}/`)}postEdgeSettingData(t){return this.http.post(`${u.nM}/`,t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var S=i(3662),m=i(2471),b=i(4568),x=i(1511),y=i(5584),E=i(9458),_=i(3424),C=i(4850),w=i(2095),D=i(740);function Z(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"form",4)(3,"div",5)(4,"div",6),e._UZ(5,"app-single-input",7)(6,"br")(7,"app-single-input",8),e.qZA(),e.TgZ(8,"div",6),e._UZ(9,"app-single-input",9)(10,"br")(11,"app-single-input",10),e.qZA()(),e.TgZ(12,"div",5)(13,"div",11)(14,"div",12)(15,"span",13),e._uU(16,"Note: "),e.qZA(),e._uU(17," Don't change above configuration without approval from manager. "),e.qZA(),e.TgZ(18,"button",14),e.NdJ("click",function(){e.CHM(t);const d=e.oxw();return e.KtG(d.updateStatus())}),e._uU(19," Submit "),e.qZA()()()(),e._UZ(20,"mat-divider",15),e.TgZ(21,"div",5)(22,"div",16)(23,"div",17)(24,"span",18),e._uU(25,"Sync shift hours"),e.qZA()(),e.TgZ(26,"button",19),e.NdJ("click",function(){e.CHM(t);const d=e.oxw();return e.KtG(d.syncShift())}),e._uU(27," Sync "),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.edgeSettingForm),e.xp6(3),e.Q6J("control",t.edgeSettingForm.get("fw_tenant_id"))("required",!0),e.xp6(2),e.Q6J("control",t.edgeSettingForm.get("fwv_asset_code"))("required",!0),e.xp6(2),e.Q6J("control",t.edgeSettingForm.get("fwv_asset_name"))("required",!0),e.xp6(2),e.Q6J("control",t.edgeSettingForm.get("fwv_dev_eui"))("required",!0),e.xp6(7),e.Q6J("disabled",t.edgeSettingForm.invalid),e.xp6(8),e.Q6J("disabled",t.edgeSettingForm.invalid)}}function I(n,s){1&n&&(e.TgZ(0,"div",2),e._UZ(1,"app-internal-error"),e.qZA())}const F=[{path:"",component:(()=>{class n{constructor(t,r,d,a,p,M,Q,J,Y){this.formBuilder=t,this.edgeSettingService=r,this.snackbar=d,this.wifiSettingsService=a,this.productService=p,this.ordersService=M,this.supplierService=Q,this.qcordersService=J,this.layoutService=Y,this.internal_error=!1,this.fwv_edge_setup_id=null,this.edgeSettingForm=this.formBuilder.group({fwv_asset_code:["",[o.kI.required]],fwv_asset_name:["",o.kI.required],fwv_dev_eui:["",o.kI.required],fw_tenant_id:["",o.kI.required]})}ngOnInit(){this.getEdgeSettingData()}postEdgeData(){const t={...this.edgeSettingForm.value,fwv_edge_setup_id:this.fwv_edge_setup_id};this.edgeSettingService.postEdgeSettingData(t).subscribe({next:r=>{this.snackbar.top_snackbar(r.Successful,"successful"),this.productService.syncProductListData().subscribe(),this.ordersService.syncOrderListData().subscribe(),this.supplierService.syncSupplierData().subscribe(),this.getEdgeSettingData(),setInterval(()=>{window.location.reload()},300)},error:r=>{r.error.Unsuccessful?this.snackbar.top_snackbar(r.error.Unsuccessful,"unsuccessful"):0==this.wifiSettingsService.isOnline()?this.snackbar.top_snackbar("Device is Offline.","unsuccessful"):this.snackbar.top_snackbar("Something Went Wrong.","unsuccessful")}})}updateStatus(){this.edgeSettingForm?.get("fw_tenant_id")?.value!=this.tenant_id?this.qcordersService.getPaylaod().subscribe({next:t=>{null!=t.fwv_order_code?this.qcordersService.UpdateOrderStatus(t.fwv_order_code,"On Hold").subscribe({next:d=>{this.qcordersService.updatePaylaod({fwv_order_code:null,product_name:null,fwv_order_id:null}).subscribe({next:p=>{this.postEdgeData()}})}}):this.postEdgeData()},error:t=>{this.postEdgeData()}}):this.postEdgeData()}getEdgeSettingData(){this.edgeSettingService.getEdgeSettingData().subscribe({next:t=>{let r=t;0==r.edgesetup.length?this.fwv_edge_setup_id=null:(this.edgeSettingForm.patchValue(r.edgesetup[0]),this.fwv_edge_setup_id=r.edgesetup[0].fwv_edge_setup_id,this.tenant_id=r.edgesetup[0].fw_tenant_id)},error:t=>{this.fwv_edge_setup_id=null,this.internal_error=!0}})}syncShift(){this.layoutService.getShiftTimings().subscribe({next:t=>{this.snackbar.top_snackbar("Shift data synced","successful"),setInterval(()=>{window.location.reload()},300)},error:t=>{this.snackbar.top_snackbar(t.error.Unsuccessful?t.error.Unsuccessful:"Something Went Wrong.","unsuccessful")}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(o.qu),e.Y36(h),e.Y36(S.h),e.Y36(m.A),e.Y36(b.s),e.Y36(x._),e.Y36(y.p),e.Y36(E.t),e.Y36(_.P))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edge-setting"]],decls:3,vars:2,consts:[[1,"main-window"],["class","edge-setting-body",4,"ngIf"],[1,"edge-setting-body"],[1,"card","card-style"],[3,"formGroup"],[1,"row"],[1,"col-lg-6","col-md-6","col-sm-12","col-xs-12","text-center"],["type","text","label","Tenant ID","placeholder","Enter Tenant ID","error","Tenant ID is Required",3,"control","required"],["type","text","label","QC Station Code","placeholder","Enter QC Station Code","error","QC Station Code is Required",3,"control","required"],["type","text","label","QC Station Name","placeholder","Enter QC Station Name","error","QC Station Name is Required",3,"control","required"],["type","text","label","EUI ID","placeholder","Enter Device EUI ID","error","EUI ID is Required",3,"control","required"],[1,"col"],[1,"fst-italic","float-start",2,"margin-top","3vh"],[1,"text-info",2,"font-weight","550"],["type","submit",1,"btn","btn-edge-setting","btn-secondary","text-light","float-end",3,"disabled","click"],[1,"mt-4"],[1,"col","p-2","mt-3"],[1,"float-start",2,"margin-top","3vh"],[1,"one2-point",2,"font-weight","550"],["type","submit",1,"btn","btn-sync","btn-secondary","text-light","float-end","me-2",3,"disabled","click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Z,28,11,"div",1),e.YNc(2,I,2,0,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!r.internal_error),e.xp6(1),e.Q6J("ngIf",r.internal_error))},dependencies:[g.O5,o._Y,o.JL,o.sg,C.d,w.g,D.b],styles:[".edge-setting-body[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:95vh}.btn-edge-setting[_ngcontent-%COMP%]{padding:20px 30px;font-size:20px;border-radius:15px;background-color:#000}.card-style[_ngcontent-%COMP%]{padding:3%;background-color:#f6f6f6;border-radius:15px}.btn-sync[_ngcontent-%COMP%]{padding:13px 25px;font-size:20px;border-radius:15px;background-color:#000}"]}),n})()}];let T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.Bz.forChild(F),l.Bz]}),n})();var U=i(7156);let k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.ez,T,v.j,U.X]}),n})()}}]);